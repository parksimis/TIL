# 변수의 범위

### 지역변수

* 함수는 동작에 필요한 변수를 얼마든지 사용할 수 있는데, 함수 내부에서 선언하는 변수를 **지역 변수**라고 한다.

* 지역 변수는 함수 안에서만 사용될 뿐 밖으로는 알려지지 않는다.

  ```python
  >>> def show():
  >>>     a = 1
  >>>     print(a)
  >>> show()
  1
  
  # 함수 바깥에서는 사용 불가
  >>> print(a)
  Traceback (most recent call last):
    File "<input>", line 1, in <module>
  NameError: name 'a' is not defined
  ```

  * `show()`함수 안에서 `a`라는 지역 변수에 1을 대입하고 출력한다. 호출원에 `show()`함수를 호출하는데 이 과정에서 `show()`는 내부적으로 `a` 변수를 만들고 초기화하여 사용한다. 
  * 지역 변수는 함수의 동작을 처리하기 위해 잠시 사용한다. 따라서 <u>**함수가 종료되면 사라진다.**</u>
  * 이 경우, `a` 지역 변수는 `show()`함수가 실행 중인 동안에만 존재하며, **사용 범위는 함수 내부로 국한된다.**
  * **사용 이유**
    * 독립성 향상
      * **이름 충돌을 피하고**, <u>함수의 동작에 필요한 모든 것을 내부에 포함</u>시켜 **독립성을 향상**
    * 재활용성 향상 
      * 함수의 동작에 필요한 모든 것을 내부에 완벽하게 소유할 수 있도록 해 **재활용성을 향상**
    * 메모리 절약
      * 지속 시간이 함수 실행 중으로 제한되어 필요할 때만 기억장소를 차지하게되므로 **메모리 절약** 이점
    * 디버깅 쉬움.
      * 사용 범위가 좁아 문제를 비교적 쉽게 찾을 수 있어 디버깅이 쉬움



### 전역 변수

* 함수 바깥에서 선언하는 변수를 **전역 변수**라고 한다. 전역 변수는 지역 변수와는 반대로 프로그램 소속이어서 어디에서나 참조할 수 있다.

  ```python
  >>> a = 2 # 전역변수
  >>> def show():
  >>>     print(a)
  >>> show()
  2
  ```

  * 소스 위에 선언하고 초기화 한 `a`가 전역 변수이다. 어디에서나 참조할 수 있어 `show()` 함수는 물론이고 함수 외부의 코드에서도 언제든지 읽고 쓸 수 있다. 

  * 함수에서 전역 변수를 읽는 것은 아무 문제가 없지만, **쓰는 경우에는 주의**해야 함.

    * 함수 내부에서 처음 대입하는 변수는 항상 지역변수로 간주됨.
    * 파이썬은 명시적인 선언이 없고, 대입에 의해 변수를 생성하다 보니 초기화하는 장소에 따라 범위가 결정된다. 
    * 따라서 함수에서 외부 변수를 쓰기 어려운 문제가 존재

    ```python
    >>> a = 1 # 전역변수
    >>> def show():
    >>>     a = 50 # 지역변수로 간주
    >>> print(a)
    1
    ```

    * 함수 내부에서 초기화하는 변수는 전역 변수와 이름이 같더라도 항상 지역 변수로 간주되기 때문에 위와 같은 결과가 나옴.
    * 우연히 이름만 같을 뿐이지 값을 저장하는 메모리 위치가 다른 별개의 변수로 간주된다.

    ```python
    >>> a = 1
    
    >>> def show():
    >>>     a = 50
    >>>     print(f'함수 내부 a 변수 id {id(a)}')    
    
    # 함수 외부 변수 a의 id 값 출력
    >>> print(f'함수 외부 a 변수 id {id(a)}')
    함수 외부 a 변수 id 1854203824
    # 함수 내부 변수 a의 id 값 출력
    >>> show()
    함수 내부 a 변수 id 1854204608
    # 서로 다름을 알 수 있다.
    ```

    * 이를 토대로 지역, 전역끼리는 이름이 같아도 상관없되, 함수 내부에서는 지역 변수가 우선이라는 규칙이 적용되는 것을 알 수 있다.

  * 만약 전역 변수의 값을 변경하고자 한다면 함수 내부에서 `global` 명령을 사용하여 변경할 수 있다.

    ```python
    >>> a = 1
    >>> def show():
    >>>     global a
    >>>     a = 50
    >>> show()
    >>> print(a)
    50
    ```

    * `global`명령은 이 변수가 외부에 이미 있으니 지역 변수를 새로 만들지 말라는 뜻이다. 
    * 여러 명이 팀을 이루어 작업하는 경우 이름 충돌은 어쩔 수 없이 발생하는데, `global` 명령이 제공되지만 가급적 비사용 권장.
      * 원칙적으로는 전역 변수를 자제하는 것이 좋고, 정 필요하면 `g_변수명` 식으로 이름에 전역임을 표시하여 충돌을 방지하는 것이 합리적이다.

