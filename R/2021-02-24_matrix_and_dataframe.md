# matrix(매트릭스)와 dataframe(데이터프레임)

### - 2차원 자료의 저장

* 매트릭스(matrix)와 데이터프레임(data frame)은 **2차원 자료를 저장하기 위한 대표적인 자료구조**이다.
* 2차원 자료 : **여러 주제**로 데이터를 수집한 형태
* **매트릭스**와 **데이터프레임**의 차이점
  * 매트릭스는 저장되는 모든 자료의 종류(data type)가 동일하지만, 데이터프레임은 서로 다른 종류의 데이터가 저장될 수 있음.

* R의 자료구조로 이야기하면, **여러 개의 벡터를 모아 놓은 것이 매트릭스 또는 데이터프레임**이라고 할 수 있음.



## - Matrix(매트릭스)

### 1. 매트릭스 만들기

* 매트릭스는 보통 숫자로만 구성된 2차원의 자료를 저장하고 처리하는데 이용
* `matrix()` 함수를 통해 만듦
  * `1:20` : 매트릭스에 저장될 값을 지정
  * `nrow` : 매트릭스 행의 개수를 의미
  * `ncol` : 매트릭스 열의 개수를 의미
  * `byrow` : 행 방향 값으로 채움

```R
> z <- matrix(1:20, nrow=4, ncol=5)
> z
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    5    9   13   17
[2,]    2    6   10   14   18
[3,]    3    7   11   15   19
[4,]    4    8   12   16   20

# byrow : 행 방향 값으로 채움
> z <- matrix(1:20, nrow=4, ncol=5, byrow=T)
> z
     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    6    7    8    9   10
[3,]   11   12   13   14   15
[4,]   16   17   18   19   20
```

* 매트릭스는 벨터를 여러 개 모아 놓은 형태이므로, **벡터들을 여러 개 묶어서 매트릭스 만들 수도 있다.**

* `rbind()`  : 두 개의 벡터를 행(row) 방향으로 묶어줌

* `cbind()` : 두 개으 벡터를 열(column) 방향으로 묶어줌

  ```R
  > # 행방향 결합
  > mat1 <- rbind(v1, v2, v3); mat1
     [,1] [,2] [,3]
  v1    1    2    3
  v2    4    5    6
  v3    7    8    9
  > # 열방향 결합
  > mat2 <- cbind(v1, v2, v3); mat2
       v1 v2 v3
  [1,]  1  4  7
  [2,]  2  5  8
  [3,]  3  6  9
  ```




### 2. 값 추출

* 벡터와 유사함. 하지만 2차원 상이므로, 인덱스가 2개 필요함.

  ```R
  > z <- matrix(1:20, nrow=4, ncol=5, byrow=T)
  > z
       [,1] [,2] [,3] [,4] [,5]
  [1,]    1    2    3    4    5
  [2,]    6    7    8    9   10
  [3,]   11   12   13   14   15
  [4,]   16   17   18   19   20
  
  > z[2, 3] # 2행 3열의 값
  [1] 8
  > z[1, 4] # 1행 4열의 값
  [1] 4
  > z[3, ] # 3행의 모든 값
  [1] 11 12 13 14 15
  > z[, 4] # 4열의 모든 값
  [1]  4  9 14 19
  
  > # 벡터 사용도 가능
  > z[1, c(1, 2, 3)] # 1행의 1, 2, 3열 값
  [1] 1 2 3
  > # 콜론도 사용 가능 
  > z[1:2, ] # 1~2행의 모든 값
       [,1] [,2] [,3] [,4] [,5]
  [1,]    1    2    3    4    5
  [2,]    6    7    8    9   10
  > # -는 ~를 제외하고라는 뜻
  > z[, -c(1, 4)] # 1, 4번째 열 제외한 모든 값
       [,1] [,2] [,3]
  [1,]    2    3    5
  [2,]    7    8   10
  [3,]   12   13   15
  [4,]   17   18   20
  ```

  

### 3. 행과 열에 이름 붙이기

```R
> # 행렬에 name을 dimnames를 통해 label을 붙일 수 있다.
> mat4 <- matrix(1:12, nrow=3, dimnames = list(c('R1', 'R2', 'R3'),
+                                              c('C1', 'C2', 'C3', 'C4')))
> mat4
   C1 C2 C3 C4
R1  1  4  7 10
R2  2  5  8 11
R3  3  6  9 12
> colnames(mat4)
[1] "C1" "C2" "C3" "C4"
> rownames(mat4)
[1] "R1" "R2" "R3"
> mat4[7]
[1] 7
> mat4[1, ]
C1 C2 C3 C4 
 1  4  7 10 
> mat4[, 2:4]
   C2 C3 C4
R1  4  7 10
R2  5  8 11
R3  6  9 12
> mat4[, -c(2,3,4)]
R1 R2 R3 
 1  2  3 
> mat4[, -2]
   C1 C3 C4
R1  1  7 10
R2  2  8 11
R3  3  9 12

> # name을 준 경우 name으로 접근 가능
> mat4['R1', 'C1']
[1] 1
```



## DataFrame(데이터프레임)

* 데동일한 자료형을 갖는 2차원 형태의 자료는 **매트릭스**에, 서로 다른 자료형을 갖는 2차원 형태의 자료는 **데이터프레임**에 저장하여 분석
  * **데이터프레임이라도 특정 열을 잘라 보았을 때는 값들의 자료형이 동일해야 함**



### 1. 데이터프레임 만들기

* `data.frame()` 함수를 사용해 만들 수 있음. 보통 여러 개의 벡터를 결합하는 형태로 생성

  ```R
  > sex <- c('F', 'M', 'M', 'M', 'F')
  > age <- c(21, 20, 25, 30, 26)
  > name <- c('철수', '길동', '관순', '감찬', '영희')
  > student <- data.frame(sex, age, name)
  > student
    sex age name
  1   F  21 철수
  2   M  20 길동
  3   M  25 관순
  4   M  30 감찬
  5   F  26 영희
  ```

  * 행과 열의 이름을 붙이거나, 데이터프레임 안의 값을 추출하는 방법도 매트릭스와 동일



### 2. 데이터셋의 기본 정보 알아보기

```R
> # 데이터셋의 기본 정보 알아보기
> dim(iris) # 행과 열의 개수 출력
[1] 150   5
> nrow(iris) # 행의 개수 보이기
[1] 150
> ncol(iris) # 열의 개수 보이기
[1] 5
> colnames(iris) # 열 이름 보이기, names() 함수와 결과 동일
[1] "Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width"  "Species"     
> head(iris) # 데이터셋의 앞부분 일부 보기(default 6)
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa
> tail(iris, 3) # 데이터셋의 뒷부분 3행 보기
    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
148          6.5         3.0          5.2         2.0 virginica
149          6.2         3.4          5.4         2.3 virginica
150          5.9         3.0          5.1         1.8 virginica
> str(iris) # 데이터셋 요약 정보 보기
'data.frame':	150 obs. of  5 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...
```



### 3. 매트릭스와 데이터프레임에 함수 적용

#### 1) 행별 열별로 합계와 평균 계산

```R
> rowMeans(iris[, -5])[1:10] # 행방향 평균
 [1] 2.550 2.375 2.350 2.350 2.550 2.850 2.425 2.525 2.225 2.400
> ## 행별, 열별로 합계 및 평균 계산
> colSums(iris[, -5]) # 범주형 데이터 제외하고 열방향 합계 계산
Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
       876.5        458.6        563.7        179.9 
> colMeans(iris[, -5]) # 범주형 데이터 제외하고 열방향 평균
Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
    5.843333     3.057333     3.758000     1.199333 
> rowSums(iris[, -5])[1:10] # 행방향 합계 결과 10개만 출력
 [1] 10.2  9.5  9.4  9.4 10.2 11.4  9.7 10.1  8.9  9.6
> rowMeans(iris[, -5])[1:10] # 행방향 평균 결과 10개만 출력
 [1] 2.550 2.375 2.350 2.350 2.550 2.850 2.425 2.525 2.225 2.400
```



#### 2) 행 열 방향 변환

* 행과 열을 바꾸어야 하는 경우가 있는데, `t()` 함수를 사용(transpose)

  ```R
  > z <- matrix(1:20, nrow=4, ncol=5)
  > z
       [,1] [,2] [,3] [,4] [,5]
  [1,]    1    5    9   13   17
  [2,]    2    6   10   14   18
  [3,]    3    7   11   15   19
  [4,]    4    8   12   16   20
  > t(z)
       [,1] [,2] [,3] [,4]
  [1,]    1    2    3    4
  [2,]    5    6    7    8
  [3,]    9   10   11   12
  [4,]   13   14   15   16
  [5,]   17   18   19   20
  ```

  

#### 3) 조건에 맞는 행과 열 값 추출

* `subset()` : 조건에 맞는 값들을 추출할 때 사용하는 함수

  ```R
  > student <- data.frame(sex, age, name)
  > student
    sex age name
  1   F  21 철수
  2   M  20 길동
  3   M  25 관순
  4   M  30 감찬
  5   F  26 영희
  
  # 성별이 남자인 행만 추출
  > subset(student, sex != 'F') # !=는 F와 같지 않으면 TRUE 반환
    sex age name
  2   M  20 길동
  3   M  25 관순
  4   M  30 감찬
  ```

  

