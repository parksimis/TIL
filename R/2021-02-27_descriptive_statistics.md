# 기술통계량

* 데이터의 특징을 요약, 기술하는 통계량
* 위치 통계량(measure of location)
  * 데이터의 중심 위치를 나타내는 척도(대표값)
  * 평균, 중위수, 절사평균, 최빈수, 사분위수 등
* 변이 통계량(measure of dispersion)
  * 데이터의 퍼짐, 흩어진 정도를 나타내는 척도(산포도)
  * 표준편차, 분산, 사분위간 범위 등
* 모양 통계량(measure of shape)
  * 왜도
    * 중심 위치로부터 어느 한쪽으로 치우친(비대칭) 정도를 나타내는 척도
  * 첨도
    * 분포의 뾰족한 정도



## - 위치통계량(중심경향성)

### 1. 평균(mean)

* 가장 많이 사용되는 대표값

* 모든 데이터의 합을 데이터의 개수로 나눈 값(산술평균)

* 특징

  * 계산이 쉽고, 수학적으로 활용하기 편리하며, 각 자료에 대해 유일한 값을 가짐

  * 분산의 계산, 모수 추정, 가설검정 등 통계분석의 대표적인 통계량으로 널리 사용됨

  * 데이터에 극단적인 값이 포함될 경우, 평균이 왜곡되는 경향이 있음

    -> 이러한 경우, 이상치에 덜 민감한 중앙값을 사용함



#### 기하 평균(Geometric Mean)

* n개의 양수 값을 모두 곱한 것의 n 제곱근
* 곱의 형태로 변화하는 자료
* 비율의 평균계산에 많이 사용함
* Ex. 물가상승률, 인구변동률



#### 조화 평균(Harmonic Mean)

* 주어진 수들의 역수들의 산술평균에서 역수를 취한 값
* 속도 등과 같이 여러 단위가 결합되어 있을 떄 계산
* Ex. 평균적인 변화율



#### 가중 평균(Weighted Mean)

* 일률적 평가가 어려운 경우 또는 차지하는 비중이 다른 경우
* 각 항의 수치에 그 중요도에 비례하는 계수를 곱한 다음 산출한 평균
* 정밀도나 들어온 양이 같지 않은 물품의 평균 가격처럼 원래의 수치가 동등하지 않다고 생각되는 경우 주로 사용함.



#### 절단 평균(Trimmed Mean)

* 최대, 최소값 중 k개를 제외한 평균
* 평균의 장점과 중앙값의 장점을 갖는 대표값
* 절사평균을 계산하려면 절사비율(%)을 결정해야 함.
  * 절사 비율은 전체 데이터의 개수에 대해 몇 %의 데이터(상위+하위)를 배제할 것인가로 결정한다.
  * 만약 5개의 데이터에 대해 최대, 최소 점수 각각 1개씩을 배제한다면, 절사율은 40%(2/5)가 됨
* 스포츠 경기에서 많이 사용(극단치가 있는 경우)
  * 스포츠 경기에서는 최대값과 최소값을 빼고 계산



### 2. 중앙값(median)

* 중위수, 중간값
* 데이터를 크기 순서대로 나열할 때 가운데 위치하는 숫자
  * 데이터 개수가 **홀수**일 경우 : 가운데 위치하는 유일한 숫자
  * 데이터 개수가 **짝수**일 경우 : 가운데 위치하는 2개의 숫자의 평균값
* 특징
  * 극단적인 값에 영향을 받지 않는 장점
  * 가운데 위치하는 한 개 또는 두 개의 데이터만으로 계산

##### - 극단적인 값이 포함된 데이터의 대표값 비교

* 평균 : 모든 데이터를 전부 고려하여 계산한 값, **무게 중심**
* 중앙값 : **데이터의 개수와 순서만을 고려하여 계산**



### 3. 최빈값(mode)

* 자료 중 가장 자주 나타나는(빈도가 가장 많은) 관측치
* 평균, 중위수와 달리 자료에 따라 존재하지 않을 수도 있고, 유일한 값이 아닐 수도 있음
* 질적 변수에도 활용됨



##### - 중앙값과 최빈값의 특징

* 자료 속에 극단적인 이상치가 있는 경우, 극단적 관찰치에 덜 민감한 중앙값을 사용
* 자료의 분포가 비대칭인 경우, 평균의 보조 자료로 활용
* 개방 구간을 갖는 도수분포표의 경우 중앙값 또는 최빈값을 대표값으로 사용
* 명목자료와 서열자료의 경우 최빈값 사용



### 4. 기대값(Expected value)

* 평균은 가지고 있는 수치형 데이터에 대한 대표값
* 기대값은 모르는 데이터에 대한 평균값
* 어떤 사건 X에 이 사건이 발생할 확률을 곱한 값의 합계로 계산



### 5. 사분위수(quartile)

* 자료를 크기 순으로 늘어 놓고, 4등분하여 각각의 경계에 있는 수
  * 제 1사분위수(하사분위수, Q1, the first quartile)
    * 자료의 1/4, 25%에 해당하는 값
  * 제 2사분위수(중위수, Q2, the seconde quartile)
    * 자료의 2/4, 50%에 해당하는 값
  * 제 3사분위수(상사분위수, Q3, the third quartile)
    * 자료의 3/4, 75%에 해당하는 값



##### - 5가 통계량

* 최소값, 제1사분위수, 중위수, 제3사분위수, 최대값을 가리킴
* 상자-수염그림(boxplot)

[![boxplot](https://www.simplypsychology.org/boxplot.jpg)](https://www.simplypsychology.org/boxplot.jpg)

<center><small><a href='https://www.simplypsychology.org/boxplots.html'>boxplot 설명</a></small></center>



##  - 변이 통계량(산포도)

* 데이터들이 얼마나 흩어져 있는가를 나타내는 것(퍼짐 정도)
* 하나의 수치로 데이터가 흩어진 정도를 계산
* 대표값과 더불어 데이터를 비교하는 경우 유용하게 사용



### 1. 범위(Range)

* 데이터의 **최대값과 최소값**의 차이
* 데이터가 퍼져있는 정도를 나타내는 가장 간단한 방법
* 범위가 클수록 산포가 크다고 말할 수 있지만, 중앙값과 마찬가지로 **극단적인 값에 영향을 받음**
* 데이터 중 2개의 정보(최대값, 최소값)만을 이용하므로 적절한 적도로 사용하기 어려움



##### - 중간범위

​	최대값과 최소값의 평균



### 2. 사분위수 편차(Quartile deviation)

* 범위의 문제점을 보완한 척도
* 사분위간 범위의 값을 2로 나눈 값으로 사분위 범위의 평균값
* 사분위간 범위 (IQR, Interquartile range )
  * 데이터를 크기 순서로 나열한 다음, 개수로 4등분할 때 **첫번째 사분위수**와 **세번째 사분위수**의 차이



### 3. 표준편차(Standard deviation)

* 계산된 분산의 제곱근으로 계산함
* 평균을 중심으로 일정한 거리에 포함된 데이터의 비율이 얼마인가를 계산
* 모든 데이터를 고려한 척도
* 특징
  * 모든 데이터가 동일한 값을 갖는다며, 분산과 표준편차는 0으로 계산됨
  * 모든 데이터에 동일한 값을 더해 주거나 빼도 변하지 않음
  * 모든 데이터에 동일한 값(C)을 곱하면 분산은 분산 * C^2으로 표준편차는 표준편차 * C만큼 커짐



### 4. 평균절대편차(MAD, Mean Absolute Deviation)

* 편차의 절대값들의 평균
* 편차는 각 자료의 평균과의 차이(평균으로부터 떨어진 정도)



### 5. 변동계수(CV, Coefficent of Variable)

* 표본 표준편차를 표본평균으로 나눈 값 또는 그 값에 100을 곱한 값
* 상대표준편차
* 서로 다른 평균과 표준편차를 갖는 여러 데이터의 흩어진 정도를 비교할 때 사용
* 변동계수 값이 크다는 것은 데이터의 흩어진 정도가 상대적으로 크다는 의미를 갖는다.



## - 모양 통계량(분포의 모양)

### 1. 왜도(skewness)

* 데이터의 비대칭도
* 분포 모양이 대표값(Ex. 평균)을 중심으로 **좌우의 모양이 대칭적인가 아닌가를 측정**
* 데이터가 한쪽 방향으로 얼마나 치우쳐져 있는가를 나타냄
* 특징
  * 왜도가 0에 가까운 값을 가지면 분포의 모양은 좌우 대칭
  * 왜도가 음수로 나타나면 오른쪽으로 치우친 분포(왼쪽 꼬리분포) 모양



### 2. 첨도(kurtosis)

* 데이터의 뾰족한 정도
* 분포가 대표값을 중심으로 얼마나 모여 있는가를 나타내는 척도
* 정규분포(첨도=3)을 기준으로 비교
  * 데이터가 대푯값을 중심으로 상당히 많이 몰려 있다면, 분포 가운데 모양이 뾰족한 모양(첨도>3)으로 나타남
  * 데이터가 대표값을 중심으로 좌우에 퍼져 있다면, 가운데 모양은 완만(첨도<3)





## - 특이값(outlier)

* 이상치, 다른 값에 비하여 특이하게 아주 크거나 아주 작은 값
* Z-score 값이 -2에서 +2 사이 또는 -3 에서 +3 사이를 벗어나는 값

<img src="https://latex.codecogs.com/gif.latex?Z_{score} = {{x_i - \bar{X} \over s}">  





## - 기술통계량 관련 R 함수

* base 패키지에서 제공하는 함수들

  | 기능       | 함수 사용법                          |
  | ---------- | ------------------------------------ |
  | 평균       | `mean(x, trim=0, na.rm=FALSE, ...)`  |
  | 중앙값     | `median(x, na.rm=, FALSE)`           |
  | 사분위수   | `quartile(x, ...)`                   |
  | 최소값     | `min(x, ...)`                        |
  | 최대값     | `max(x, ...)`                        |
  | 5가 통계량 | `fivenum(, ...)`                     |
  | 요약       | `summary(x, ...)`                    |
  | 표준편차   | `sd(x, na.rm=FALSE)`                 |
  | 분산       | `var(x, y = NULL, na.rm=FALSE, use)` |
  | 범위       | `range(x, ...)`                      |

  

* 사용 예제

  ```R
  # 예제 데이터 : 3개 식당의 배달시간(임의 생성)
  > AStore <- c(20, 21, 23, 22, 26, 28, 35, 35, 41, 42, 
  +             43, 45, 44, 45, 46, 47, 47, 46, 47, 58,
  +             59, 60, 56, 57, 57, 80)
  > BStore <- c(5, 6, 11, 13, 15, 16, 20, 20, 21, 23,
  +             22, 27, 27, 30, 32, 36, 37, 37, 40, 
  +             40, 43, 44, 45, 51, 54, 70, 600)
  > CStore <- c(5, 5, 5, 12, 10, 11, 20, 20, 20, 20, 
  +             20, 21, 20, 30, 32, 31, 31, 31, 36, 40, 
  +             40, 51, 61, 51, 61, 61, 70)
  
  > # 평균
  > mean(AStore); mean(BStore); mean(CStore);
  [1] 43.46154
  [1] 51.2963
  [1] 30.18519
  > 
  > # 표준 편차
  > sd(AStore); sd(BStore); sd(CStore);
  [1] 14.51959
  [1] 110.7464
  [1] 18.85988
  > 
  > #중위수
  > median(AStore); median(BStore); median(CStore)
  [1] 45
  [1] 30
  [1] 30
  > 
  > # 4분위수
  > quantile(AStore); quantile(BStore); quantile(CStore)
     0%   25%   50%   75%  100% 
  20.00 35.00 45.00 53.75 80.00 
     0%   25%   50%   75%  100% 
    5.0  20.0  30.0  41.5 600.0 
    0%  25%  50%  75% 100% 
     5   20   30   40   70 
  
  > # BStore가 편차도 크고 4분위수 결과에서 3분위수와 4분위수 편차가 큼
  > 
  > # 이상치를 제거한 BStore의 평균 계산
  > mean(BStore[which(BStore != max(BStore))])
  [1] 30.19231
  > 
  > new.B <- BStore[which(BStore != max(BStore))]
  
  # 변동 계수 직접 계산
  sd(AStore)/mean(AStore); sd(BStore)/mean(BStore); sd(CStore)/mean(CStore);
  
  # 이상치를 제거한 BStore의 변동 계수
  sd(AStore)/mean(AStore); sd(new.B)/mean(new.B); sd(CStore)/mean(CStore);
  
  > # 왜도, 첨도, 변동계수 계산하는 function 만들기
  > mystat <- function(x, na.omit=FALSE){
  +   if(na.omit)
  +     x <- x[!is.na(x)]
  +   m <- mean(x)
  +   s <- sd(x)
  +   n <- length(x)
  +   skew <- sum((x-m)^3/s^3)/ n
  +   kurt <- sum((x-m)^4/s^2)/ n - 3
  +   cv <- s/m
  +   
  +   return(c(mean=m, SD=s, Skewness=skew, Kurtosis=kurt, CV=cv))
  + }
  
  > mystat(AStore); mystat(BStore); mystat(new.B); mystat(CStore);
         mean          SD    Skewness    Kurtosis          CV 
   43.4615385  14.5195889   0.1795277 573.1458968   0.3340790 
          mean         SD     Skewness     Kurtosis        CV 
  5.129630e+01 1.107464e+02 4.488433e+00 2.737986e+05 2.158954e+00 
         mean          SD    Skewness    Kurtosis          CV 
   30.1923077  15.7835845   0.4278442 653.6842672   0.5227684 
         mean          SD    Skewness    Kurtosis          CV 
   30.1851852  18.8598822   0.5227799 757.3816678   0.6248059 
  ```

  