# 제어문과 조건문

## - 조건문

### 1. `if-else` 문

* 조건문(conditional statement)
  
* 조건에 따라 실행할 명령문을 다르게 할 경우에 사용
  
* 기본 구조

  ```R
  if (비교 조건) {
      조건이 참일 때 실행할 명령문(들)
  } else {
      조건이 거짓일 때 실행할 명령문(들)
  }
  ```

* 사용 예제

  * 사용자에게 값을 입력 받아 회원등급과 적립금을 출력

  ```R
  amount = svDialogs::dlg_input('Enter the purchase amount')$res
  
  amount <- as.numeric(amount)
  
  if (amount >= 300000){
    type <- "Platinum"
    savings <- 0.07
  } else if (amount >= 200000){
    type <- 'Gold'
    savings <- 0.05
  } else if (amount >= 100000){
    type <- 'Silver'
    savings <- 0.03
  } else {
    type <- 'Friends'
    savings <- 0.01
  }
  
  cat('회원등급은 ',type,'이며', amount*savings, '적립됨')
  ```



### 2. `ifelse`문

* `if-else`문을 서술할 때 조건에 따라 선택할 값이 각각 하나씩이면, `ifelse`문을 이용하는 것이 편리함.

* 기본 구문

  ```R
  ifelse(비교 조건, 조건이 참일 때 선택할 값, 조건이 거짓일 때 선택할 값)
  ```

* 사용 예제

  ```R
  > a <- 10
  > b <- 20
  > c <- ifelse(a>b, a, b)
  > print(c)
  [1] 20
  ```

  

## - 반복문

### 1. `for문`

* 기본 구문

  ```R
  for(반복 변수 in 반복 범위){
      반복할 명령문(들)
  }
  ```

  * 반복 범위는 반복 변수에 할당할 값을 모아둔 벡터(이 벡터의 길이만큼 for문이 반복됨)

* 사용 예제

  ```R
  > n <- 0
  > for(n in 1:10){
  +   print(n)
  + }
  [1] 1
  [1] 2
  [1] 3
  [1] 4
  [1] 5
  [1] 6
  [1] 7
  [1] 8
  [1] 9
  [1] 10
  ```

  


### 2. `while문`

* for문과 유사한 기능을 하는 반복문

* 기본 문법

  ```R
  while(비교 조건){
      반복할 명령문(들)
  }
  ```

* 사용 예제

  ```R
  > sum <- 0
  > i <- 1
  > while(i <= 100){
  +   sum <- sum + i
  +   i <- i + 1
  + }
  > print(sum)
  [1] 5050
  ```

  * while문을 실행하기 전에 사용 변수를 초기화해야 함.

  * 블록 안에서 반복 변수를 증가 또는 감소 시켜야 함.

    만약 저러한 코드가 없으면 **무한루프**에 빠지게 됨.



### 3. `apply()` 계열 함수

* 반복 작업의 대상이 매트릭스나 데이터프레임의 행이나 열인 경우는 for문이나 while문 대신에 `apply()` 함수 사용 가능

* `apply()`는 매트릭스 데이터프레임에 있는 행들이나 열들을 하나하나 차례로 꺼내어 평균이나 합계 등을 구하는 작업 수행 시 유용

* 기본 문법

  ```R
  apply(데이터셋, 행/열 방향 지정, 적용 함수)
  ```

  * 데이터셋 : 반복 작업을 적용할 대상인 매트릭스나 데이터프레임 이름 입력
  * 행/열 방향 지정 : 행 - 1, 열 - 2
  * 적용 함수 : 반복 작업 내용 공지, R 함수 또는 사용자 정의 함수 가능

* 사용 예시

  ```R
  > # apply()
  > apply(iris[, 1:4], 1, mean) # 행 방향 평균
    [1] 2.550 2.375 2.350 2.350 2.550 2.850 2.425 2.525 2.225 2.400 2.700 2.500 2.325 2.125 2.800 3.000 2.750 2.575 2.875 2.675 2.675 2.675 2.350 2.650 2.575 2.450 2.600
   [28] 2.600 2.550 2.425 2.425 2.675 2.725 2.825 2.425 2.400 2.625 2.500 2.225 2.550 2.525 2.100 2.275 2.675 2.800 2.375 2.675 2.350 2.675 2.475 4.075 3.900 4.100 3.275
   [55] 3.850 3.575 3.975 2.900 3.850 3.300 2.875 3.650 3.300 3.775 3.350 3.900 3.650 3.400 3.600 3.275 3.925 3.550 3.800 3.700 3.725 3.850 3.950 4.100 3.725 3.200 3.200
   [82] 3.150 3.400 3.850 3.600 3.875 4.000 3.575 3.500 3.325 3.425 3.775 3.400 2.900 3.450 3.525 3.525 3.675 2.925 3.475 4.525 3.875 4.525 4.150 4.375 4.825 3.400 4.575
  [109] 4.200 4.850 4.200 4.075 4.350 3.800 4.025 4.300 4.200 5.100 4.875 3.675 4.525 3.825 4.800 3.925 4.450 4.550 3.900 3.950 4.225 4.400 4.550 5.025 4.250 3.925 3.925
  [136] 4.775 4.425 4.200 3.900 4.375 4.450 4.350 3.875 4.550 4.550 4.300 3.925 4.175 4.325 3.950
  > apply(iris[, 1:4], 2, mean) # 열 방향 평균
  Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
      5.843333     3.057333     3.758000     1.199333 
  ```

  